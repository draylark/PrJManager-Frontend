function g(e,n){return e.parent===n.parent?1:2}function y(e){return e.reduce(x,0)/e.length}function x(e,n){return e+n.x}function m(e){return 1+e.reduce(w,0)}function w(e,n){return Math.max(e,n.y)}function _(e){for(var n;n=e.children;)e=n[0];return e}function A(e){for(var n;n=e.children;)e=n[n.length-1];return e}function K(){var e=g,n=1,t=1,r=!1;function u(i){var h,a=0;i.eachAfter(function(c){var f=c.children;f?(c.x=y(f),c.y=m(f)):(c.x=h?a+=e(c,h):0,c.y=0,h=c)});var o=_(i),s=A(i),p=o.x-e(o,s)/2,v=s.x+e(s,o)/2;return i.eachAfter(r?function(c){c.x=(c.x-i.x)*n,c.y=(i.y-c.y)*t}:function(c){c.x=(c.x-p)/(v-p)*n,c.y=(1-(i.y?c.y/i.y:1))*t})}return u.separation=function(i){return arguments.length?(e=i,u):e},u.size=function(i){return arguments.length?(r=!1,n=+i[0],t=+i[1],u):r?null:[n,t]},u.nodeSize=function(i){return arguments.length?(r=!0,n=+i[0],t=+i[1],u):r?[n,t]:null},u}function B(e){var n=0,t=e.children,r=t&&t.length;if(!r)n=1;else for(;--r>=0;)n+=t[r].value;e.value=n}function k(){return this.eachAfter(B)}function N(e,n){let t=-1;for(const r of this)e.call(n,r,++t,this);return this}function S(e,n){for(var t=this,r=[t],u,i,h=-1;t=r.pop();)if(e.call(n,t,++h,this),u=t.children)for(i=u.length-1;i>=0;--i)r.push(u[i]);return this}function z(e,n){for(var t=this,r=[t],u=[],i,h,a,o=-1;t=r.pop();)if(u.push(t),i=t.children)for(h=0,a=i.length;h<a;++h)r.push(i[h]);for(;t=u.pop();)e.call(n,t,++o,this);return this}function C(e,n){let t=-1;for(const r of this)if(e.call(n,r,++t,this))return r}function R(e){return this.eachAfter(function(n){for(var t=+e(n.data)||0,r=n.children,u=r&&r.length;--u>=0;)t+=r[u].value;n.value=t})}function M(e){return this.eachBefore(function(n){n.children&&n.children.sort(e)})}function X(e){for(var n=this,t=Y(n,e),r=[n];n!==t;)n=n.parent,r.push(n);for(var u=r.length;e!==t;)r.splice(u,0,e),e=e.parent;return r}function Y(e,n){if(e===n)return e;var t=e.ancestors(),r=n.ancestors(),u=null;for(e=t.pop(),n=r.pop();e===n;)u=e,e=t.pop(),n=r.pop();return u}function j(){for(var e=this,n=[e];e=e.parent;)n.push(e);return n}function D(){return Array.from(this)}function H(){var e=[];return this.eachBefore(function(n){n.children||e.push(n)}),e}function L(){var e=this,n=[];return e.each(function(t){t!==e&&n.push({source:t.parent,target:t})}),n}function*q(){var e=this,n,t=[e],r,u,i;do for(n=t.reverse(),t=[];e=n.pop();)if(yield e,r=e.children)for(u=0,i=r.length;u<i;++u)t.push(r[u]);while(t.length)}function d(e,n){e instanceof Map?(e=[void 0,e],n===void 0&&(n=G)):n===void 0&&(n=F);for(var t=new l(e),r,u=[t],i,h,a,o;r=u.pop();)if((h=n(r.data))&&(o=(h=Array.from(h)).length))for(r.children=h,a=o-1;a>=0;--a)u.push(i=h[a]=new l(h[a])),i.parent=r,i.depth=r.depth+1;return t.eachBefore(J)}function E(){return d(this).eachBefore(I)}function F(e){return e.children}function G(e){return Array.isArray(e)?e[1]:null}function I(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function J(e){var n=0;do e.height=n;while((e=e.parent)&&e.height<++n)}function l(e){this.data=e,this.depth=this.height=0,this.parent=null}l.prototype=d.prototype={constructor:l,count:k,each:N,eachAfter:z,eachBefore:S,find:C,sum:R,sort:M,path:X,ancestors:j,descendants:D,leaves:H,links:L,copy:E,[Symbol.iterator]:q};export{K as c,d as h};
