import{B as Q,F as X}from"./three-DLf2F1tq.js";import{e as H}from"./earcut-YjIu_wux.js";import{c as Y,f as Z}from"./d3-geo-8K_4ySTE.js";function x(e,t,r){return t=j(t),ue(e,V()?Reflect.construct(t,r||[],j(e).constructor):t.apply(e,r))}function V(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V=function(){return!!e})()}function ee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,u,h,f=[],o=!0,g=!1;try{if(u=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=u.call(r)).done)&&(f.push(n.value),f.length!==t);o=!0);}catch(P){g=!0,i=P}finally{try{if(!o&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(g)throw i}}return f}}function te(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function re(e){var t=te(e,"string");return typeof t=="symbol"?t:String(t)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,re(n.key),n)}}function ie(e,t,r){return t&&F(e.prototype,t),r&&F(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},j(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},S(e,t)}function ae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ae(e)}function _(e,t){return fe(e)||ee(e,t)||C(e,t)||ce()}function fe(e){if(Array.isArray(e))return e}function C(e,t){if(e){if(typeof e=="string")return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}}function D(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function le(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=C(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,h=!1,f;return{s:function(){r=r.call(e)},n:function(){var o=r.next();return u=o.done,o},e:function(o){h=!0,f=o},f:function(){try{!u&&r.return!=null&&r.return()}finally{if(h)throw f}}}}var $=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=[],i=null;return t.forEach(function(u){if(i){var h=Y(u,i)*180/Math.PI;if(h>r)for(var f=Z(i,u),o=1/Math.ceil(h/r),g=o;g<1;)n.push(f(g)),g+=o}n.push(i=u)}),n},T=typeof window<"u"&&window.THREE?window.THREE:{BufferGeometry:Q,Float32BufferAttribute:X},se=new T.BufferGeometry().setAttribute?"setAttribute":"addAttribute",pe=function(e){oe(t,e);function t(r){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;ne(this,t),n=x(this,t),n.type="GeoJsonGeometry",n.parameters={geoJson:r,radius:i,resolution:u};var h=({Point:P,MultiPoint:J,LineString:G,MultiLineString:N,Polygon:B,MultiPolygon:z}[r.type]||function(){return[]})(r.coordinates,i),f=[],o=[],g=0;h.forEach(function(c){var l=f.length;w({indices:f,vertices:o},c),n.addGroup(l,f.length-l,g++)}),f.length&&n.setIndex(f),o.length&&n[se]("position",new T.Float32BufferAttribute(o,3));function P(c,l){var s=M(c[1],c[0],l),a=[];return[{vertices:s,indices:a}]}function J(c,l){var s={vertices:[],indices:[]};return c.map(function(a){return P(a,l)}).forEach(function(a){var v=_(a,1),y=v[0];w(s,y)}),[s]}function G(c,l){for(var s=$(c,u).map(function(b){var O=_(b,2),E=O[0],A=O[1];return M(A,E,l)}),a=H.flatten([s]),v=a.vertices,y=Math.round(v.length/3),p=[],d=1;d<y;d++)p.push(d-1,d);return[{vertices:v,indices:p}]}function N(c,l){var s={vertices:[],indices:[]};return c.map(function(a){return G(a,l)}).forEach(function(a){var v=_(a,1),y=v[0];w(s,y)}),[s]}function B(c,l){for(var s=c.map(function(K){return $(K,u).map(function(U){var L=_(U,2),W=L[0],q=L[1];return M(q,W,l)})}),a=H.flatten(s),v=a.vertices,y=a.holes,p=y[0]||1/0,d=v.slice(0,p*3),b=v.slice(p*3),O=new Set(y),E=Math.round(v.length/3),A=[],I=[],m=1;m<E;m++)O.has(m)||(m<p?A.push(m-1,m):I.push(m-1-p,m-p));var R=[{indices:A,vertices:d}];return y.length&&R.push({indices:I,vertices:b}),R}function z(c,l){var s={vertices:[],indices:[]},a={vertices:[],indices:[]};c.map(function(y){return B(y,l)}).forEach(function(y){var p=_(y,2),d=p[0],b=p[1];w(s,d),b&&w(a,b)});var v=[s];return a.vertices.length&&v.push(a),v}return n}return ie(t)}(T.BufferGeometry);function w(e,t){var r=Math.round(e.vertices.length/3);k(e.vertices,t.vertices),k(e.indices,t.indices.map(function(n){return n+r}))}function k(e,t){var r=le(t),n;try{for(r.s();!(n=r.n()).done;){var i=n.value;e.push(i)}}catch(u){r.e(u)}finally{r.f()}}function M(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-e)*Math.PI/180,i=(90-t)*Math.PI/180;return[r*Math.sin(n)*Math.cos(i),r*Math.cos(n),r*Math.sin(n)*Math.sin(i)]}export{pe as G};
